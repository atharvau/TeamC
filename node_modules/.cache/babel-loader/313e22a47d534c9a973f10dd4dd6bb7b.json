{"ast":null,"code":"import _classCallCheck from \"/home/athrva/MyProjects/React/chat/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/athrva/MyProjects/React/chat/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/athrva/MyProjects/React/chat/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/athrva/MyProjects/React/chat/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/athrva/MyProjects/React/chat/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/athrva/MyProjects/React/chat/src/ChatComponents/CardSendPic.js\";\nimport React, { Component } from \"react\";\nimport firebase from \"firebase\";\nimport FileUploader from \"react-firebase-file-uploader\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Input from \"@material-ui/core/Input\";\nimport fire from \"../Fire\";\nimport ProfilePage from \"../TodoComponent/ProfilePage\";\nvar styles = {\n  card: {\n    minWidth: 300\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\"\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  }\n};\nvar qaa = {\n  msg: null,\n  uid: null,\n  timestamp: null,\n  pic: null\n};\nvar Notes = [];\nvar Inbox = [];\nvar key = {};\nvar Todos = {};\nvar Poll = [];\n\nvar onClick = function onClick() {\n  key = fire.database().ref().child(\"Msg\").push(qaa).key;\n  if (Notes != null) var n = Notes.length;\n  var NotesModel = [];\n\n  if (n > 0) {\n    for (var index = 0; index < n; index++) {\n      NotesModel.push({\n        Note: Notes[index],\n        timestamp: qaa.timestamp,\n        uid: qaa.uid,\n        key: key\n      });\n      fire.database().ref().child(\"Notes\").push(NotesModel[index]);\n    }\n  }\n\n  if (Inbox != null) var g = Inbox.length;\n\n  if (g > 0) {\n    for (var index2 = 0; index2 < g; index2++) {\n      fire.database().ref().child(\"Inbox\").child(Inbox[index2]).push(key);\n    }\n  }\n\n  var TodoModel = [];\n  if (Todos != null) var f = Todos.length;\n\n  if (f > 0) {\n    for (var ind = 0; ind < f; ind++) {\n      TodoModel.push({\n        info: {\n          todo: Todos[ind],\n          timestamp: qaa.timestamp,\n          uid: qaa.uid,\n          key: key\n        }\n      });\n      fire.database().ref().child(\"Todo\").push(TodoModel[ind]);\n    }\n  }\n\n  if (Poll != null) {\n    fire.database().ref().child(\"Poll\").push(Poll);\n  }\n};\n\nvar fu = function fu(e) {\n  var date = new Date();\n  var timestamp = date.getTime();\n  var re = /#\\w+/gim;\n  var found = e.target.value.match(re);\n  var aba = /@\\w+/gim;\n  var founda = e.target.value.match(aba);\n  var Todo = /\\$\\w+/gim;\n  var TodoF = e.target.value.match(Todo);\n  var Polex = /\\%\\w+/gim;\n  var Pol = e.target.value.match(Polex);\n  Poll = {\n    title: {\n      Pol: Pol\n    },\n    Info: {\n      timestamp: timestamp\n    }\n  };\n  Notes = found;\n  Inbox = founda;\n  Todos = TodoF;\n\n  if (Inbox != null) {\n    for (var index3 = 0; index3 < Inbox.length; index3++) {\n      var c = Inbox[index3];\n      Inbox[index3] = c.substring(1, c.length);\n    }\n  }\n\n  if (Notes != null) {\n    for (var index4 = 0; index4 < Notes.length; index4++) {\n      var d = Notes[index4];\n      Notes[index4] = d.substring(1, d.length);\n    }\n  }\n\n  if (TodoF != null) {\n    for (var index5 = 0; index5 < TodoF.length; index5++) {\n      var f = Todos[index5];\n      Todos[index5] = f.substring(1, f.length);\n    }\n  }\n\n  qaa = {\n    uid: qaa.uid,\n    msg: e.target.value,\n    timestamp: timestamp\n  };\n};\n\nvar CardSendPic =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CardSendPic, _Component);\n\n  function CardSendPic(props) {\n    var _this;\n\n    _classCallCheck(this, CardSendPic);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CardSendPic).call(this, props));\n\n    _this.handleChangeUsername = function (event) {\n      return _this.setState({\n        username: event.target.value\n      });\n    };\n\n    _this.handleUploadStart = function () {\n      return _this.setState({\n        isUploading: true,\n        progress: 0\n      });\n    };\n\n    _this.handleProgress = function (progress) {\n      return _this.setState({\n        progress: progress\n      });\n    };\n\n    _this.handleUploadError = function (error) {\n      _this.setState({\n        isUploading: false\n      });\n\n      console.error(error);\n    };\n\n    _this.handleUploadSuccess = function (filename) {\n      _this.setState({\n        avatar: filename,\n        progress: 100,\n        isUploading: false\n      });\n\n      firebase.storage().ref(\"images\").child(filename).getDownloadURL().then(function (url) {\n        _this.setState({\n          avatarURL: url\n        });\n\n        qaa = {\n          uid: qaa.uid,\n          msg: qaa.msg,\n          timestamp: qaa.timestamp,\n          pic: url\n        };\n      });\n    };\n\n    qaa = {\n      uid: props.uid\n    };\n    _this.state = {\n      username: \"AAA\",\n      avatar: \"\",\n      isUploading: false,\n      progress: 0,\n      avatarURL: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(CardSendPic, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: \"CardSendmgs-card-318\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(CardContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: \"CardSendmgs-title-320\",\n        color: \"textSecondary\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"New Messsage\"), React.createElement(Input, {\n        onChange: fu,\n        multiline: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      })), React.createElement(CardActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: onClick,\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, \"Send\")), this.state.isUploading && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Progress: \", this.state.progress), React.createElement(FileUploader, {\n        accept: \"Posts/*\",\n        name: \"avatar\",\n        randomizeFilename: true,\n        storageRef: firebase.storage().ref(\"images\"),\n        onUploadStart: this.handleUploadStart,\n        onUploadError: this.handleUploadError,\n        onUploadSuccess: this.handleUploadSuccess,\n        onProgress: this.handleProgress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return CardSendPic;\n}(Component);\n\nexport default CardSendPic;","map":{"version":3,"sources":["/home/athrva/MyProjects/React/chat/src/ChatComponents/CardSendPic.js"],"names":["React","Component","firebase","FileUploader","PropTypes","withStyles","Card","CardActions","CardContent","Button","Typography","Input","fire","ProfilePage","styles","card","minWidth","bullet","display","margin","transform","title","fontSize","pos","marginBottom","qaa","msg","uid","timestamp","pic","Notes","Inbox","key","Todos","Poll","onClick","database","ref","child","push","n","length","NotesModel","index","Note","g","index2","TodoModel","f","ind","info","todo","fu","e","date","Date","getTime","re","found","target","value","match","aba","founda","Todo","TodoF","Polex","Pol","Info","index3","c","substring","index4","d","index5","CardSendPic","props","handleChangeUsername","event","setState","username","handleUploadStart","isUploading","progress","handleProgress","handleUploadError","error","console","handleUploadSuccess","filename","avatar","storage","getDownloadURL","then","url","avatarURL","state"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport firebase from \"firebase\";\nimport FileUploader from \"react-firebase-file-uploader\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Input from \"@material-ui/core/Input\";\nimport fire from \"../Fire\";\nimport ProfilePage from \"../TodoComponent/ProfilePage\";\nconst styles = {\n  card: {\n    minWidth: 300\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\"\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  }\n};\n\nvar qaa = {\n  msg: null,\n  uid: null,\n  timestamp: null,\n  pic: null\n};\n\nvar Notes = [];\nvar Inbox = [];\nvar key = {};\nvar Todos = {};\n\nvar Poll = [];\n\nvar onClick = () => {\n  key = fire\n    .database()\n    .ref()\n    .child(\"Msg\")\n    .push(qaa).key;\n\n  if (Notes != null) var n = Notes.length;\n\n  let NotesModel = [];\n  if (n > 0) {\n    for (let index = 0; index < n; index++) {\n      NotesModel.push({\n        Note: Notes[index],\n        timestamp: qaa.timestamp,\n        uid: qaa.uid,\n        key: key\n      });\n\n      fire\n        .database()\n        .ref()\n        .child(\"Notes\")\n        .push(NotesModel[index]);\n    }\n  }\n\n  if (Inbox != null) var g = Inbox.length;\n  if (g > 0) {\n    for (let index2 = 0; index2 < g; index2++) {\n      fire\n        .database()\n        .ref()\n        .child(\"Inbox\")\n        .child(Inbox[index2])\n        .push(key);\n    }\n  }\n\n  let TodoModel = [];\n\n  if (Todos != null) var f = Todos.length;\n  if (f > 0) {\n    for (let ind = 0; ind < f; ind++) {\n      TodoModel.push({\n        info: {\n          todo: Todos[ind],\n          timestamp: qaa.timestamp,\n          uid: qaa.uid,\n          key: key\n        }\n      });\n      fire\n        .database()\n        .ref()\n        .child(\"Todo\")\n        .push(TodoModel[ind]);\n    }\n  }\n\n  if (Poll != null) {\n    fire\n      .database()\n      .ref()\n      .child(\"Poll\")\n      .push(Poll);\n  }\n};\n\nconst fu = e => {\n  var date = new Date();\n  var timestamp = date.getTime();\n\n  var re = /#\\w+/gim;\n  var found = e.target.value.match(re);\n\n  var aba = /@\\w+/gim;\n  var founda = e.target.value.match(aba);\n\n  var Todo = /\\$\\w+/gim;\n  var TodoF = e.target.value.match(Todo);\n\n  var Polex = /\\%\\w+/gim;\n  var Pol = e.target.value.match(Polex);\n  Poll = { title: { Pol } ,Info :{timestamp: timestamp}};\n\n  Notes = found;\n  Inbox = founda;\n  Todos = TodoF;\n\n  if (Inbox != null) {\n    for (let index3 = 0; index3 < Inbox.length; index3++) {\n      var c = Inbox[index3];\n\n      Inbox[index3] = c.substring(1, c.length);\n    }\n  }\n\n  if (Notes != null) {\n    for (let index4 = 0; index4 < Notes.length; index4++) {\n      var d = Notes[index4];\n\n      Notes[index4] = d.substring(1, d.length);\n    }\n  }\n\n  if (TodoF != null) {\n    for (let index5 = 0; index5 < TodoF.length; index5++) {\n      var f = Todos[index5];\n      Todos[index5] = f.substring(1, f.length);\n    }\n  }\n\n  qaa = {\n    uid: qaa.uid,\n    msg: e.target.value,\n    timestamp: timestamp\n  };\n};\nclass CardSendPic extends Component {\n  constructor(props) {\n    super(props);\n    qaa = {\n      uid: props.uid\n    };\n\n    this.state = {\n      username: \"AAA\",\n      avatar: \"\",\n      isUploading: false,\n      progress: 0,\n      avatarURL: \"\"\n    };\n  }\n\n  handleChangeUsername = event =>\n    this.setState({ username: event.target.value });\n  handleUploadStart = () => this.setState({ isUploading: true, progress: 0 });\n  handleProgress = progress => this.setState({ progress });\n  handleUploadError = error => {\n    this.setState({ isUploading: false });\n    console.error(error);\n  };\n  handleUploadSuccess = filename => {\n    this.setState({ avatar: filename, progress: 100, isUploading: false });\n    firebase\n      .storage()\n      .ref(\"images\")\n      .child(filename)\n      .getDownloadURL()\n      .then(url => {\n        this.setState({ avatarURL: url });\n        qaa = {\n          uid: qaa.uid,\n          msg: qaa.msg,\n          timestamp: qaa.timestamp,\n          pic: url\n        };\n      });\n  };\n\n  render() {\n    return (\n      <div>\n        <Card className=\"CardSendmgs-card-318\">\n          <CardContent>\n            <Typography\n              className=\"CardSendmgs-title-320\"\n              color=\"textSecondary\"\n              gutterBottom\n            >\n              New Messsage\n            </Typography>\n            <Input onChange={fu} multiline />\n          </CardContent>\n          <CardActions>\n            <Button onClick={onClick} size=\"small\">\n              Send\n            </Button>\n          </CardActions>\n\n          {this.state.isUploading && <p>Progress: {this.state.progress}</p>}\n          <FileUploader\n            accept=\"Posts/*\"\n            name=\"avatar\"\n            randomizeFilename\n            storageRef={firebase.storage().ref(\"images\")}\n            onUploadStart={this.handleUploadStart}\n            onUploadError={this.handleUploadError}\n            onUploadSuccess={this.handleUploadSuccess}\n            onProgress={this.handleProgress}\n          />\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default CardSendPic;\n"]},"metadata":{},"sourceType":"module"}